(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{236:function(e,t,n){"use strict";n.r(t);var o=n(6),r=(n(38),n(49),{middleware:"auth",data:function(){return{email:"",password:""}},head:function(){return{meta:[{name:"google-signin-client_id",content:"1088970981210-nitujd3kb9dd23uqioq253agun3dflkb.apps.googleusercontent.com"}]}},computed:{authenticated:function(){return this.$store.getters.isAuthed}},watch:{authenticated:function(e){var t=this;e&&setTimeout((function(){return t.$router.push("/")}),2e3)}},mounted:function(){window.gapi.signin2.render("google-signin-btn",{onsuccess:this.onSignIn})},methods:{register:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,data,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("signinup up with "+e.email+" and "+e.password),t.next=3,e.$axios.post("/signup/",{email:e.email,password:e.password});case 3:if(n=t.sent,data=n.data,200===(o=n.status)){t.next=9;break}return console.log("sign up failed with "+o+data),t.abrupt("return");case 9:r=data.token,console.log(r),e.$store.commit("setUserData",{token:r,authType:"password"});case 12:case"end":return t.stop()}}),t)})))()},onSignIn:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,data,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.getBasicProfile(),console.log("ID: "+o.getId()),console.log("Name: "+o.getName()),console.log("Image URL: "+o.getImageUrl()),console.log("Email: "+o.getEmail()),console.log(o),console.log(e),console.log(e.qc.id_token),n.next=10,t.$axios.post("/google-signup/",{id_token:e.qc.id_token});case 10:if(r=n.sent,data=r.data,200===(c=r.status)){n.next=16;break}return console.log("sign up failed with "+c+data),n.abrupt("return");case 16:l=data.token,console.log(l),t.$store.commit("setUserData",{token:l,authType:"google"});case 19:case"end":return n.stop()}}),n)})))()},signOut:function(){console.log("signing out"),window.gapi.auth2.getAuthInstance().signOut().then((function(){console.log("User signed out."),this.$store.commit("removeUserData")}))}}}),c=n(34),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("form",{on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[n("label",{attrs:{for:"email"}},[e._v(" Email ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{id:"email",type:"text",name:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),n("label",{attrs:{for:"password"}},[e._v("Password ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",type:"password",name:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),n("button",{attrs:{type:"submit"}},[e._v("\n        Register\n      ")])])]),e._v(" "),n("h1",[e._v("authentication is "+e._s(e.authenticated))]),e._v(" "),e.authenticated?n("div",[n("a",{attrs:{href:""},on:{click:function(t){return e.signOut()}}},[e._v("Sign out")])]):n("div",[n("button",{attrs:{id:"google-signin-btn"}})])])}),[],!1,null,null,null);t.default=component.exports}}]);